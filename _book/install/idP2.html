<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>idP 2 安装 | Shibboleth简单部署文档</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../install/idP3.html" />
    
    
    <link rel="prev" href="../install/index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.1"
        data-chapter-title="idP 2 安装"
        data-filepath="install/idP2.md"
        data-basepath=".."
        data-revision="Tue May 24 2016 11:43:05 GMT+0800 (中国标准时间)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        本书简介
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="shibboleth/index.html">
            
                
                    <a href="../shibboleth/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Shibboleth 介绍
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="shibboleth/whats_shibboleth.html">
            
                
                    <a href="../shibboleth/whats_shibboleth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        什么是 Shibboleth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="shibboleth/how_it_work.html">
            
                
                    <a href="../shibboleth/how_it_work.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Shibboleth 的工作原理
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="shibboleth/sso.html">
            
                
                    <a href="../shibboleth/sso.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        单点登录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="shibboleth/federated_sso.html">
            
                
                    <a href="../shibboleth/federated_sso.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        联邦式的单点登录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="shibboleth/ds.html">
            
                
                    <a href="../shibboleth/ds.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Discovery Service
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="shibboleth/attributes.html">
            
                
                    <a href="../shibboleth/attributes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        用户属性
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="shibboleth/metadata.html">
            
                
                    <a href="../shibboleth/metadata.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Metadata
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="shibboleth/profile.html">
            
                
                    <a href="../shibboleth/profile.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Profile
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="shibboleth/binding.html">
            
                
                    <a href="../shibboleth/binding.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        Binding
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="install/index.html">
            
                
                    <a href="../install/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Shibboleth 安装
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="install/idP2.html">
            
                
                    <a href="../install/idP2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        idP 2 安装
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="install/idP3.html">
            
                
                    <a href="../install/idP3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        idP 3 安装
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="install/idP2_upgrade_idP3.html">
            
                
                    <a href="../install/idP2_upgrade_idP3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        从 idP2 更新至 idP3
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="install/sp.html">
            
                
                    <a href="../install/sp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        SP 安装
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="install/cds.html">
            
                
                    <a href="../install/cds.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        集中式 DS 安装
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="install/esp.html">
            
                
                    <a href="../install/esp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        嵌入式 DS 安装
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="idP2/index.html">
            
                
                    <a href="../idP2/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        idP 2 配置
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="idP2/idpAuth.html">
            
                
                    <a href="../idP2/idpAuth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        用户认证配置
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="idP2/idpAttr.html">
            
                
                    <a href="../idP2/idpAttr.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        属性获取配置
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="idP2/idpFilter.html">
            
                
                    <a href="../idP2/idpFilter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        属性过滤配置
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="idP2/idprely_party.html">
            
                
                    <a href="../idP2/idprely_party.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        relying-party 配置
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="idP2/idpMetadata.html">
            
                
                    <a href="../idP2/idpMetadata.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        idp 注册
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="idP3/index.html">
            
                
                    <a href="../idP3/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        idP 3 配置
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="idP3/idpAuth.html">
            
                
                    <a href="../idP3/idpAuth.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        认证配置
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="sp/index.html">
            
                
                    <a href="../sp/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        sp 配置
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="sp/sp_attribute_map.html">
            
                
                    <a href="../sp/sp_attribute_map.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        属性过滤器
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Shibboleth简单部署文档</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="idp-2-&#x5B89;&#x88C5;">idP 2 &#x5B89;&#x88C5;</h1>
<p>&#x6839;&#x636E; Shibboleth &#x5B98;&#x65B9;&#x901A;&#x544A;&#xFF0C;idP2 &#x5DF2;&#x7ECF;&#x8FDB;&#x5165; End of life &#x5468;&#x671F;&#x3002;&#x5176;&#x5C06;&#x5728; 2016.7.31 &#x505C;&#x6B62;&#x66F4;&#x65B0;&#x3002;</p>
<p>idP3 &#x7248;&#x672C;&#x7684;&#x53D8;&#x5316;&#x5F88;&#x5927;&#xFF0C;&#x5728;&#x51B3;&#x5B9A;&#x5C06;&#x8001;&#x7248;&#x672C;&#x5347;&#x7EA7;&#x81F3; idP3 &#x4E4B;&#x524D;&#x3002;&#x9488;&#x5BF9; idP2 &#x7684;&#x6587;&#x6863;&#x4F9D;&#x7136;&#x6709;&#x5176;&#x4EF7;&#x503C;&#x3002;</p>
<h4 id="&#x51C6;&#x5907;&#x5DE5;&#x4F5C;">&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h4>
<ul>
<li>&#x4E00;&#x5F20; SSL &#x8BC1;&#x4E66;&#x4EE5;&#x5F00;&#x542F; idP &#x7684; https &#x8BBF;&#x95EE;</li>
<li>&#x4E00;&#x4E2A; metadata &#x7684;&#x83B7;&#x53D6;&#x6E90;&#xFF0C;&#x7528;&#x4E8E;&#x548C;&#x4E92;&#x4FE1;&#x7684; sp &#x8FDB;&#x884C;&#x901A;&#x8BAF;&#x3002;&#x901A;&#x5E38;&#x4F60;&#x53EF;&#x4EE5;&#x5411;&#x8054;&#x76DF;&#x7684;&#x7BA1;&#x7406;&#x65B9;&#x53BB;&#x54A8;&#x8BE2;&#x8FD9;&#x4E2A;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684; metadata&#x3002;</li>
</ul>
<p>&#x5B89;&#x88C5;&#x65F6;&#x5019;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x4E3A;&#x4F60;&#x751F;&#x6210;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;&#xFF1A;</p>
<ul>
<li>idP &#x7684; entity ID</li>
<li>&#x4E00;&#x5BF9;&#x7528;&#x4E8E; SAML &#x901A;&#x4FE1;&#x65F6;&#x7528;&#x7684;&#x5BC6;&#x94A5; &#xFF08;&#x4E0D;&#x662F;&#x7528;&#x6765; https &#x8BBF;&#x95EE;idP&#x7684;&#xFF09;</li>
<li>idP &#x7684;&#x521D;&#x59CB; metadata</li>
<li>idP &#x7684;&#x521D;&#x59CB;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;</li>
</ul>
<h4 id="&#x7279;&#x522B;&#x6CE8;&#x610F;">&#x7279;&#x522B;&#x6CE8;&#x610F;</h4>
<ul>
<li>Ret hat/CentOS &#x4E00;&#x4E9B;&#x8001;&#x7684;&#x7248;&#x672C;&#x91CC;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684; GNU Java &#x7F16;&#x8BD1;&#x7684;VM(gcj)&#x3002;&#x8FD9;&#x662F;&#x4E0D;&#x652F;&#x6301;&#x7684;&#xFF0C;&#x8BF7;&#x52A1;&#x5FC5;&#x91CD;&#x65B0;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x7684;JVM&#xFF08;&#x6BD4;&#x5982; Oracle jdk&#xFF09;</li>
<li>Debian7&#xFF08;&#x201C;wheezy&quot;) &#x4E0B;&#x7684; &#x4F7F;&#x7528; openjdk6 &#x6709;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x5EFA;&#x8BAE;&#x5347;&#x7EA7;&#x5230; openjdk7</li>
<li>&#x5173;&#x4E8E; openjdk&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; Oracle &#x5B98;&#x65B9;&#x7684;&#x6807;&#x51C6; jdk&#x3002;openjdk &#x6709;&#x65F6;&#x5019;&#x4F1A;&#x6709;&#x4E9B;&#x610F;&#x6599;&#x4E4B;&#x5916;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;&#x6BD4;&#x5982;&#x4E0A;&#x9762; Debian &#x7684;&#x95EE;&#x9898;&#x3002;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x731C;&#x5230;&#x5230;&#x5BF9;&#x4EFB;&#x4F55;&#x83AB;&#x540D;&#x5176;&#x5999;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x91CA;&#x90FD;&#x5C06;&#x6307;&#x5411;&#x5728;&#x5728;Oracle&#x7684;JVM&#x4E0A;&#x91CD;&#x65B0;&#x90E8;&#x7F72;&#x3002;</li>
</ul>
<h4 id="&#x5B89;&#x88C5;-idp">&#x5B89;&#x88C5; idP</h4>
<p>Shibboleth idp V2 &#x7684;&#x7248;&#x672C;&#x662F;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684; Java web application&#xFF0C;&#x57FA;&#x4E8E; Servlet 2.4 &#x89C4;&#x8303;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6240;&#x6709;&#x517C;&#x5BB9;&#x6B64;&#x89C4;&#x8303;&#x7684; Servlet &#x5BB9;&#x5668;&#x4E0A;&#x8FD0;&#x884C; idP &#x3002;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x77E5;&#x9053;&#x8BE5;&#x9009;&#x54EA;&#x4E00;&#x4E2A;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x4F7F;&#x7528; Apache Tomcat&#xFF0C;&#x4E5F;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x7528; Jetty&#x3002;</p>
<p>&#x5B98;&#x65B9;&#x652F;&#x6301;&#x7684;&#x5BB9;&#x5668;&#x7248;&#x672C;&#x662F; Jetty7+ &#x548C; Tomcat6+ &#x7684;&#x7248;&#x672C;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4EE5; Tomcat &#x4E3A;&#x4F8B;&#xFF0C;&#x5173;&#x4E8E;&#x5BB9;&#x5668;&#x672C;&#x8EAB;&#x7684;&#x4E00;&#x4E9B;&#x6587;&#x6863;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5BF9;&#x5E94;&#x7684;&#x5B98;&#x7F51;&#x53BB;&#x67E5;&#x3002;</p>
<ol>
<li>&#x4E0B;&#x8F7D; <a href="http://shibboleth.net/downloads/identity-provider/2.4.4/" target="_blank">idP</a> </li>
<li>&#x89E3;&#x538B;&#x4F60;&#x4E0B;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982; : <pre><code> unzip shibboleth-identityprovider-2.4.4-bin.zip
</code></pre></li>
<li>&#x8FDB;&#x5165;&#x89E3;&#x538B;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<pre><code> cd shibboleth-identityprovider-2.4.4
</code></pre></li>
<li>&#x8FD0;&#x884C; <code>./install.sh</code> (linux) &#x6216;&#x8005; <code>./install.bat</code> (windows)<ul>
<li>idP &#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF0C;&#x672C;&#x6587;&#x4E2D;&#x4EE5; IDP_HOME &#x4EE3;&#x66FF;</li>
</ul>
</li>
<li>&#x90E8;&#x7F72;&#x4F60;&#x7684; idP war &#x6587;&#x4EF6;&#x5230; java &#x5BB9;&#x5668;&#x91CC;&#xFF0C;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x5728; <code>IDP_HOME/war/idp.war</code></li>
</ol>
<p>&#x6CE8;&#x610F;&#xFF0C;idP &#x7684; metadata &#x5E76;&#x4E0D;&#x4F1A;&#x5728;&#x4F60;&#x4FEE;&#x6539;&#x4E86; idP &#x7684;&#x914D;&#x7F6E;&#x540E;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x624B;&#x52A8;&#x53BB;&#x66F4;&#x65B0;&#x8FD9;&#x4E2A;</p>
<h5 id="tomcat-&#x8C03;&#x4F18;&#x53EF;&#x9009;&#xFF09;">Tomcat &#x8C03;&#x4F18;(&#x53EF;&#x9009;&#xFF09;</h5>
<p>&#x73AF;&#x5883;&#x90E8;&#x7F72;</p>
<ul>
<li>&#x81F3;&#x5C11;&#x9700;&#x8981; Apache Tomcat 6.0.17 &#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;</li>
<li>Java 6 &#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;</li>
</ul>
<p>&#x6027;&#x80FD;&#x8C03;&#x4F18;</p>
<ul>
<li>&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#x5230; JAVA_OPTS &#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;<ul>
<li><code>-Xmx512m</code> &#x8FD9;&#x91CC;&#x914D;&#x7F6E;&#x4E86;&#x4F60; Tomcat &#x6240;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#xFF0C;&#x5EFA;&#x8BAE;&#x81F3;&#x5C11; 512M</li>
<li><code>-XX:MaxPermSize=128m</code> JVM&#x6700;&#x5927;&#x5141;&#x8BB8;&#x5206;&#x914D;&#x7684;&#x975E;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x6309;&#x9700;&#x5206;&#x914D;</li>
</ul>
</li>
<li>&#x9650;&#x5236; Post &#x8868;&#x5355;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5728; Tomact &#x7684; Connector &#x4E2D;&#xFF08;AJP &#x7684;&#x6216;&#x8005; http &#x7684;&#xFF09;&#x914D;&#x7F6E; maxPostSize&#x53C2;&#x6570;&#x3002;100K(100000)&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x5408;&#x7406;&#x7684;&#x6570;&#x503C;&#x3002;</li>
</ul>
<p>&#x90E8;&#x7F72; idp.war &#x65F6;&#xFF0C;&#x6700;&#x7B80;&#x5355;&#x7684;&#x529E;&#x6CD5;&#x5F53;&#x7136;&#x662F;&#x76F4;&#x63A5;&#x590D;&#x5236;&#x5230; Tomcat &#x7684; webapp &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;Tomcat &#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x81EA;&#x52A8;&#x89E3;&#x538B;&#x4ED6;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x79CD;&#x529E;&#x6CD5;&#x662F;&#x544A;&#x8BC9; Tomcat &#x5230;&#x54EA;&#x91CC;&#x53BB;&#x52A0;&#x8F7D; idp.war&#x3002;&#x65B0;&#x5EFA;&#x5982;&#x4E0B;&#x6587;&#x4EF6; <code>TOMCAT_HOME/conf/Catalina/localhost/idp.xml</code> &#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF08;&#x66FF;&#x6362;IDP_HOME&#x4E3A;&#x4F60;&#x7684;&#x5B9E;&#x9645;&#x8DEF;&#x5F84;)</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">Context</span> <span class="hljs-attribute">docBase</span>=<span class="hljs-value">&quot;IDP_HOME/war/idp.war&quot;</span>
         <span class="hljs-attribute">privileged</span>=<span class="hljs-value">&quot;true&quot;</span>
         <span class="hljs-attribute">antiResourceLocking</span>=<span class="hljs-value">&quot;false&quot;</span>
         <span class="hljs-attribute">antiJARLocking</span>=<span class="hljs-value">&quot;false&quot;</span>
         <span class="hljs-attribute">unpackWAR</span>=<span class="hljs-value">&quot;false&quot;</span>
         <span class="hljs-attribute">swallowOutput</span>=<span class="hljs-value">&quot;true&quot;</span> /&gt;</span>
</code></pre>
<h4 id="&#x4F7F;&#x7528;&#x53CD;&#x5411;&#x4EE3;&#x7406;">&#x4F7F;&#x7528;&#x53CD;&#x5411;&#x4EE3;&#x7406;</h4>
<p>idP &#x90E8;&#x7F72;&#x5728; tomcat &#x4E0A;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E; http &#x5BF9; tomcat &#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E8E;&#x7EF4;&#x62A4;&#x548C;&#x589E;&#x5F3A;&#x6269;&#x5C55;&#x6027;&#x3002;
&#x8FD9;&#x91CC;&#x4EE5; CentOS6 &#x4E0B; &#x4F7F;&#x7528; apache &#x505A; ajp &#x53CD;&#x5411;&#x4EE3;&#x7406;&#x4E3A;&#x4F8B;</p>
<p>&#x53D6;&#x6D88; tomcat &#x7684; AJP &#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;
&#x4FEE;&#x6539;<code>/opt/apache-tomcat-6.0.36/conf/server.xml</code>
&#x5728; <code>&lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt;</code>&#x4E0B;&#x589E;&#x52A0;</p>
<pre><code class="lang-xml">request.tomcatAuthentication=&quot;false&quot; address=&quot;127.0.0.1&quot;
</code></pre>
<p>&#x914D;&#x7F6E; apache &#x7684; ajp &#x53CD;&#x5411;&#x4EE3;&#x7406;
&#x4FEE;&#x6539; httpd.conf
<code>ProxyPass /idp/ ajp://localhost:8009/idp</code></p>
<h4 id="&#x90E8;&#x7F72;-ssl-&#x8BC1;&#x4E66;">&#x90E8;&#x7F72; ssl &#x8BC1;&#x4E66;</h4>
<p>&#x5728; apache &#x4E0A;&#x90E8;&#x7F72; ssl &#x8BC1;&#x4E66;&#x53EF;&#x6BD4; tomcat &#x5BB9;&#x6613;&#x591A;&#x4E86;</p>
<p>&#x67E5;&#x770B;<code>/etc/httpd/conf.d/ssl.conf</code>
&#x5728;&#x5BF9;&#x5E94;&#x8DEF;&#x5F84;&#x4E0B;&#x90E8;&#x7F72;&#x8BC1;&#x4E66;</p>
<h4 id="idp-&#x72B6;&#x6001;&#x7684;&#x67E5;&#x770B;">idP &#x72B6;&#x6001;&#x7684;&#x67E5;&#x770B;</h4>
<p>&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x8FD9;&#x4E2A;&#x5730;&#x5740; <a href="https://idp.example.edu.cn/idp/profile/Status" target="_blank">https://idp.example.edu.cn/idp/profile/Status</a>
&#x5982;&#x679C; idP &#x670D;&#x52A1;&#x6B63;&#x5E38;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x663E;&#x793A; ok</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE; <a href="https://idp.exmaple.edu.cn/idp/status" target="_blank">https://idp.exmaple.edu.cn/idp/status</a>
&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x66F4;&#x8BE6;&#x7EC6;&#x7684; idP &#x72B6;&#x6001;&#x4FE1;&#x606F;</p>
<p>&#x540E;&#x8005;&#x9ED8;&#x8BA4;&#x53EA;&#x5141;&#x8BB8;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#x3002;&#x53EF;&#x4EE5;&#x4FEE;&#x6539; web.xml &#x6765;&#x4FEE;&#x6539;ACL&#x3002;</p>
<h4 id="&#x670D;&#x52A1;&#x7684;&#x542F;&#x505C;">&#x670D;&#x52A1;&#x7684;&#x542F;&#x505C;</h4>
<p>Tomcat&#x670D;&#x52A1;&#x7684;&#x542F;&#x505C;</p>
<pre><code>/opt/apache-tomcat-6.0.36/bin/startup.sh
/opt/apache-tomcat-6.0.36/bin/shutdown.sh
</code></pre><p>Apache&#x670D;&#x52A1;&#x7684;&#x542F;&#x505C;</p>
<pre><code>Service start httpd
Service stop httpd
</code></pre><p>&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF0C;&#x4ECD;&#x4EE5; CentOS 6 &#x4E3A;&#x4F8B;</p>
<pre><code>Chkconfig httpd on
Chkconfig ntpd on
</code></pre><p>&#x4FEE;&#x6539;<code>/etc/rc.local</code>
&#x6DFB;&#x52A0;</p>
<pre><code>/opt/apache-tomcat-6.0.36/bin/startup.sh
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../install/index.html" class="navigation navigation-prev " aria-label="Previous page: Shibboleth 安装"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../install/idP3.html" class="navigation navigation-next " aria-label="Next page: idP 3 安装"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
